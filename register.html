<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Demo_IPTIP_MIREA_test_bot</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script> <!--Подключаем скрипт от телеграм-->
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
<div class="subscription-buttons">
    <form>
        <label>Фамилия <input type="text"></label><br>
        <label>Имя <input type="text"></label><br>
        <label>Отчество <input type="text"></label><br>
        <label>Группа
            <select id="group">
              <option value="1">ЭФБО-01-22</option>
              <option value="3">ЭФМО-01-22</option>
              <option value="4">ЭПМО-01-22</option>
            </select>
        </label><br>
        <label>Курс
            <select id="курс">
                <option value="1">1</option>
                <option value="1">2</option>
                <option value="1">3</option>
                <option value="1">4</option>
                <option value="1">5</option>
                <option value="1">6</option>
                <option value="1">Магистратура</option>
                <option value="1">Аспирантура</option>
            </select>
        </label><br>
        <input id="send" type="button" value="Отправить">
    </form>
</div>
</body>
<script>
    let tg = window.Telegram.WebApp; //получаем объект webapp телеграма
    tg.expand(); //расширяем на все окно

    let btn = document.getElementById("btn1"); //получаем кнопку подписаться

    tg.MainButton.text = "Changed Text"; //изменяем текст кнопки
    tg.MainButton.setText("Сохранить настройки"); //изменяем текст кнопки иначе
    tg.MainButton.textColor = "#ffffff"; //изменяем цвет текста кнопки
    tg.MainButton.color = "#4CAF50"; //изменяем цвет бэкграунда кнопки

    tg.MainButton.show() //показываем

    Telegram.WebApp.onEvent('mainButtonClicked', function () {
        // let data = {
        //     subscribe: true,
        //     name: 'Рассылка 1'
        // }
        tg.sendData("Вы зарегистрировались в боте");
        // tg.sendDate(JSON.stringify(data));
        tg.close();
        //при клике на основную кнопку отправляем данные в строковом виде
    });

    // btn.addEventListener('click', function () { //вешаем событие на нажатие html-кнопки
    //
    //     if(btn.textContent === "Подписаться")
    //     {
    //         btn.style.backgroundColor = "#de0c1b";
    //         btn.textContent = "Отписаться";
    //     }
    //     else
    //     {
    //         btn.style.backgroundColor = "#4CAF50";
    //         btn.textContent = "Подписаться";
    //     }
    //
    //     // btn.style.color = "#ffffff";
    //     //
    //     // let data = {
    //     //     subscribe: true,
    //     //     name: 'Рассылка 1'
    //     // }
    //     // alert(JSON.stringify(data));
    //     // tg.sendDate(JSON.stringify(data));
    //     // tg.close();
    // });
</script>
</html>